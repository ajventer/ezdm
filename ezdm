#!/usr/bin/env python
"""Main EZDM console"""
from ezdm_libs.util import smart_input, highlight, gui
import os
import sys


if __name__ == '__main__': 
    PATH = os.path.dirname(sys.argv[0])

    ACTIONLIST = {'View a character sheet':'ezdm-viewchar', 'Create a new character sheet':'ezdm-mkcs', 'Combat !':'ezdm-quick_combat', 'Grant XP to character':'ezdm-xp_tool', 'Roll dice':'ezdm-dice_roller'}

    ACTION = ''
    while not ACTION.lower() =='quit':
        highlight('Welcome to the EZDM console V1.0')
        ACTIONS = sorted(ACTIONLIST.keys())
        ACTIONS.append('Quit')
        ACTION = smart_input('Please select an activity', validentries=ACTIONS)
        if ACTION.lower() != 'quit':           
            COMMAND = ACTIONLIST[ACTION]
            if not gui():
                COMMAND = "%s --console" % COMMAND
            print "Running %s" % COMMAND
            os.system(os.path.join(PATH, COMMAND))
            if not gui():
                raw_input()
